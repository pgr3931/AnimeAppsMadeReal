---
import ThemeToggle from './ThemeToggle.tsx';
---

<script>
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        localStorage.theme = 'dark';
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }

    let prevScrollpos = window.pageYOffset;
    window.addEventListener('scroll', function(e) {
        if(e.target.id === 'main'){
            const currentScrollPos = e.target.scrollTop;
            if (prevScrollpos > currentScrollPos) {
                document.getElementById("header").style.transform = "translateY(0)";
            } else {
                document.getElementById("header").style.transform = "translateY(-4rem)";
            }
            prevScrollpos = currentScrollPos;
        }
    }, true);
</script>
<header id="header" class="bg-slate-100 dark:bg-gray-900 dark:bg-opacity-60 bg-opacity-60 flex flex-row justify-between px-6 md:px-40 xl:px-72 2xl:px-96 py-2 absolute top-0 left-0 right-[10px] transition-transform">
    <h1 class="bg-clip-text text-3xl font-semibold text-transparent bg-gradient-to-r from-pink-500 to-violet-500">Anime Apps Made Real</h1>
    <ThemeToggle client:load />
</header>